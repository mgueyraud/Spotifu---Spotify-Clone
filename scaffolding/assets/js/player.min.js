"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function convertSecondstoValidFormat(t){var e=new Date(1e3*t),t=e.getUTCMinutes(),e=e.getSeconds();return t.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")}var Player=function(){function l(t){var e=t.el,r=t.currentMusic,n=t.playButton,a=t.progress,i=t.duration,t=t.currentTime;_classCallCheck(this,l),this.$playerEl=document.querySelector(e),this.$progressEl=document.querySelector(a),this.$durationEl=document.querySelector(i),this.$currentTimeEl=document.querySelector(t),this.$playButtonEl=document.querySelector(n),this.setMusic(r),this.init()}return _createClass(l,[{key:"setListeners",value:function(){var e=this;this.$playButtonEl.addEventListener("click",function(t){t.preventDefault(),e.isPlaying?e.pause():e.play()}),this.$playerEl.onended=function(){clearInterval(e.timer),e.$currentTimeEl.textContent="00:00",e.$playButtonEl.src=e.$playButtonEl.dataset.play,e.$progressEl.querySelector("div").style.width="0%"}}},{key:"play",value:function(t){var e=this;t&&(this.currentMusic=t,this.setMusic(t)),this.$playButtonEl.src=this.$playButtonEl.dataset.pause,this.$playerEl.play(),this.isPlaying=!0,this.$playerEl.onloadedmetadata=function(){e.$durationEl.textContent="".concat(convertSecondstoValidFormat(e.$playerEl.duration))},this.startProgress()}},{key:"startProgress",value:function(){var t,e=this;this.timer=setInterval(function(){isNaN(e.$playerEl.duration)||(t=100*e.$playerEl.currentTime/e.$playerEl.duration,e.$currentTimeEl.textContent="".concat(convertSecondstoValidFormat(e.$playerEl.currentTime)),e.$progressEl.querySelector("div").style.width="".concat(t,"%"))},1e3)}},{key:"pause",value:function(){this.$playerEl.pause(),this.$playButtonEl.src=this.$playButtonEl.dataset.play,clearInterval(this.timer),this.isPlaying=!1}},{key:"setMusic",value:function(t){this.$playerEl.src=t}},{key:"init",value:function(){this.isPlaying=!1,this.setListeners()}}]),l}();